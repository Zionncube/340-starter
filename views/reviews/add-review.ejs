<%- include('../partials/head') %>
<%- include('../partials/header') %>
<%- include('../partials/nav') %>
<main>
  <h1><%= title %></h1>
  
  <div class="vehicle-info">
    <h3><%= vehicle.inv_year %> <%= vehicle.inv_make %> <%= vehicle.inv_model %></h3>
    <img src="<%= vehicle.inv_image %>" alt="<%= vehicle.inv_make %> <%= vehicle.inv_model %>" style="max-width: 200px;">
  </div>

  <% if (errors) { %>
    <div class="flash-message error">
      <% errors.forEach(error => { %>
        <p><%= error.msg %></p>
      <% }) %>
    </div>
  <% } %>

  <form action="/reviews/add" method="post">
    <input type="hidden" name="inv_id" value="<%= vehicle.inv_id %>">
    
    <label for="review_rating">Rating (1-5 stars)</label>
    <select id="review_rating" name="review_rating" required>
      <option value="5" <%= review_rating == 5 ? 'selected' : '' %>>⭐⭐⭐⭐⭐ (5 stars)</option>
      <option value="4" <%= review_rating == 4 ? 'selected' : '' %>>⭐⭐⭐⭐ (4 stars)</option>
      <option value="3" <%= review_rating == 3 ? 'selected' : '' %>>⭐⭐⭐ (3 stars)</option>
      <option value="2" <%= review_rating == 2 ? 'selected' : '' %>>⭐⭐ (2 stars)</option>
      <option value="1" <%= review_rating == 1 ? 'selected' : '' %>>⭐ (1 star)</option>
    </select>

    <label for="review_title">Review Title</label>
    <input type="text" id="review_title" name="review_title" required maxlength="100" value="<%= review_title %>">

    <label for="review_text">Review</label>
    <textarea id="review_text" name="review_text" required rows="5" maxlength="1000"><%= review_text %></textarea>

    <button type="submit">Submit Review</button>
  </form>
</main>
<%- include('../partials/footer') %>